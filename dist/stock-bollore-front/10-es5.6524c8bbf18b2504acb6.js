!function(){function e(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){if(e){if("string"==typeof e)return i(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,n):void 0}}function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var i=0,t=new Array(n);i<n;i++)t[i]=e[i];return t}function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(e,n){for(var i=0;i<n.length;i++){var t=n[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function o(e,n,i){return n&&r(e.prototype,n),i&&r(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{lyWG:function(i,r,l){"use strict";l.r(r),l.d(r,"UtilisateursModule",function(){return ve});var c,a,s=l("ofXK"),u=l("tyNb"),b=l("fXoL"),f=((c=function(){function e(){t(this,e)}return o(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||c)},c.\u0275cmp=b.Hb({type:c,selectors:[["app-utilisateurs"]],decls:1,vars:0,template:function(e,n){1&e&&b.Ob(0,"router-outlet")},directives:[u.h],styles:[""]}),c),h=l("3Pt+"),p=l("AytR"),d=l("iLIS"),m=l("tk/3"),z=l("QIn1"),v=l("b6Qw"),S=((a=function(){function e(n,i,r){t(this,e),this.http=n,this.Cookie=i,this.router=r,this.url=p.a.backend+"/service"}return o(e,[{key:"getList",value:function(){return this.http.get(this.url+"/list",this.http_get_request())}},{key:"createService",value:function(e){return this.http.post(this.url+"/creer-service",e,this.http_get_request())}},{key:"updateService",value:function(e){return this.http.put(this.url+"/modifier-service",e,this.http_get_request())}},{key:"deleteService",value:function(e){return this.http.delete("".concat(this.url,"/supprimer-service/").concat(e),this.http_get_request())}},{key:"http_get_request",value:function(){return this.checkCredentials(),{headers:new m.d({"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+this.getAccessToken().accessToken})}}},{key:"checkCredentials",value:function(){this.Cookie.check("access_token")||this.logout()}},{key:"logout",value:function(){this.Cookie.delete("access_token","./"),this.Cookie.delete("user","./"),this.router.navigate(["/login"])}},{key:"getAccessToken",value:function(){return new z.a,JSON.parse(this.Cookie.get("access_token"))}}]),e}()).\u0275fac=function(e){return new(e||a)(b.Xb(m.b),b.Xb(v.a),b.Xb(u.d))},a.\u0275prov=b.Jb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),g=l("DlHu"),T=l("JqCM"),k=l("oyxB"),y=l("rMZv"),D=l("Nqz0"),O=l("PTRe"),E=l("OzZK"),P=l("RwU8"),C=l("C2AL"),A=l("FwiY"),L=l("4xsP"),x=l("KupA"),F=l("ocnv"),N=l("B+r4");function V(e,n){if(1&e){var i=b.Ub();b.Tb(0,"th",15),b.Dc(1),b.Tb(2,"nz-filter-trigger",16),b.ac("nzVisibleChange",function(e){return b.rc(i),b.dc().visible=e}),b.Ob(3,"i",17),b.Sb(),b.Sb()}if(2&e){var t=n.$implicit,r=b.dc(),o=b.pc(15);b.jc("nzSortFn",t.sortFn),b.zb(1),b.Fc(" ",t.title," "),b.zb(1),b.jc("nzVisible",r.visible)("nzActive",r.searchValue.length>0)("nzDropdownMenu",o)}}function I(e,n){if(1&e){var i=b.Ub();b.Tb(0,"tr"),b.Tb(1,"td"),b.Dc(2),b.Sb(),b.Tb(3,"td"),b.Tb(4,"nz-space"),b.Tb(5,"nz-space-item"),b.Tb(6,"button",18),b.ac("click",function(){b.rc(i);var e=n.$implicit;return b.dc().updateForm(e)}),b.Ob(7,"i",19),b.Sb(),b.Sb(),b.Tb(8,"nz-space-item"),b.Tb(9,"button",20),b.ac("nzOnConfirm",function(){b.rc(i);var e=n.$implicit;return b.dc().confirmMsgDelete(e)})("nzOnCancel",function(){return b.rc(i),b.dc().cancelMsgDelete()}),b.Ob(10,"i",21),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&e){var t=n.$implicit;b.zb(2),b.Ec(null==t?null:t.libelle)}}function j(e,n){if(1&e){var i=b.Ub();b.Tb(0,"nz-tab",3),b.Tb(1,"form",22),b.Tb(2,"div",23),b.Tb(3,"div",24),b.Tb(4,"nz-form-item"),b.Tb(5,"nz-form-label",25),b.Dc(6,"Libell\xe9"),b.Sb(),b.Tb(7,"nz-form-control",26),b.Tb(8,"input",27),b.ac("keyup",function(e){return b.rc(i),b.dc().validateServiceForm.patchValue({libelle:e.target.value.toUpperCase()})}),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(9,"div",24),b.Tb(10,"nz-space"),b.Tb(11,"nz-space-item"),b.Tb(12,"button",28),b.ac("click",function(){return b.rc(i),b.dc().submitServiceForm()}),b.Ob(13,"i",29),b.Dc(14," Enregistrer "),b.Sb(),b.Sb(),b.Tb(15,"nz-space-item"),b.Tb(16,"button",30),b.ac("click",function(e){return b.rc(i),b.dc().resetServiceForm(e)}),b.Ob(17,"i",31),b.Dc(18," Annuler "),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&e){var t=b.dc();b.jc("nzTitle","Nouveau service"),b.zb(1),b.jc("formGroup",t.validateServiceForm),b.zb(4),b.jc("nzSpan",24),b.zb(2),b.jc("nzSpan",24),b.zb(5),b.jc("disabled",t.validateServiceForm.invalid)}}var M,w,R=((M=function(){function n(e,i,r,o){t(this,n),this.behaviorService=e,this.fb=i,this.serviceBService=r,this.tokenService=o,this.listOfColumn=[],this.searchValue="",this.visible=!1,this.token=o.getAccessToken()}return o(n,[{key:"ngOnInit",value:function(){this.behaviorService.setBreadcrumbItems(["Accueil","Gestion Utilisateur","Service"]),this.makeServiceForm(null),this.list(),this.listOfColumnHeadeer(),this.is_admin=this.canWrite()}},{key:"canWrite",value:function(){return this.token.roles.indexOf(p.a.ROLE_ADMIN)>-1}},{key:"makeServiceForm",value:function(e){this.validateServiceForm=this.fb.group({id:[null!=e?e.id:null],libelle:[null!=e?e.libelle:null,[h.r.required]]})}},{key:"resetServiceForm",value:function(e){for(var n in e.preventDefault(),this.validateServiceForm.reset(),this.validateServiceForm.controls)this.validateServiceForm.controls[n].markAsPristine(),this.validateServiceForm.controls[n].updateValueAndValidity();this.makeServiceForm(null),this.indexOfTab=0,this.pageIndex=1}},{key:"submitServiceForm",value:function(){var n=this;for(var i in this.validateServiceForm.controls)this.validateServiceForm.controls[i].markAsDirty(),this.validateServiceForm.controls[i].updateValueAndValidity();if(this.validateServiceForm.valid){var t=this.validateServiceForm.value;if(null==t.id)this.serviceBService.createService(t).subscribe(function(i){n.serviceList.unshift(i),n.serviceList=e(n.serviceList),n.listOfDisplayData=e(n.serviceList),n.makeServiceForm(null),console.log("Enregistrement ok"),n.indexOfTab=0,n.pageIndex=1},function(e){console.log("Enregistrement non ok")});else{var r=this.serviceList.findIndex(function(e){return e.id==t.id});this.serviceBService.updateService(t).subscribe(function(i){console.log(n.serviceList),console.log(i),n.serviceList[r]=i,n.serviceList=e(n.serviceList),n.listOfDisplayData=e(n.serviceList),console.log(n.serviceList),n.makeServiceForm(null),console.log("Update ok"),n.indexOfTab=0,n.pageIndex=1},function(e){console.log("Update non ok")})}}}},{key:"list",value:function(){var n=this;this.serviceBService.getList().subscribe(function(i){n.serviceList=i,console.log("Service List ==>",n.serviceList),n.listOfDisplayData=e(n.serviceList),n.pageIndex=1},function(e){console.log("error getList Service ==>",e.message," ",e.status," ",e.statusText)})}},{key:"reset",value:function(){this.searchValue="",this.search()}},{key:"search",value:function(){var e=this;this.visible=!1,this.listOfDisplayData=this.serviceList.filter(function(n){return-1!==n.libelle.indexOf(e.searchValue)})}},{key:"updateForm",value:function(e){this.makeServiceForm(e),this.indexOfTab=1}},{key:"confirmMsgDelete",value:function(e){var n=this;this.serviceBService.deleteService(e.id).subscribe(function(e){console.log("data du delete ==>",e),n.list()},function(e){console.log("error deleteMagasin ==>",e.message," ",e.status," ",e.statusText)})}},{key:"cancelMsgDelete",value:function(){}},{key:"listOfColumnHeadeer",value:function(){this.listOfColumn=[{title:"Libell\xe9",compare:null,sortFn:function(e,n){return e.libelle.localeCompare(n.libelle)}}]}}]),n}()).\u0275fac=function(e){return new(e||M)(b.Nb(d.a),b.Nb(h.f),b.Nb(S),b.Nb(g.a))},M.\u0275cmp=b.Hb({type:M,selectors:[["app-service"]],decls:24,vars:11,consts:[["bdColor","rgba(0, 0, 0, 0.8)","size","large","color","#fff","type","line-scale-pulse-out",3,"fullScreen"],[2,"color","white"],[3,"nzSelectedIndex","nzSize","nzSelectedIndexChange"],[3,"nzTitle"],["nzTableLayout","fixed",3,"nzData","nzPageSize","nzPageIndex"],["sortTable",""],["nzCustomFilter","",3,"nzSortFn",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["menu","nzDropdownMenu"],[1,"ant-table-filter-dropdown"],[1,"search-box"],["type","text","nz-input","","placeholder","chercher un service",3,"ngModel","ngModelChange"],["nz-button","","nzSize","small","nzType","primary",1,"search-button",3,"click"],["nz-button","","nzSize","small",3,"click"],[3,"nzTitle",4,"ngIf"],["nzCustomFilter","",3,"nzSortFn"],[3,"nzVisible","nzActive","nzDropdownMenu","nzVisibleChange"],["nz-icon","","nzType","search"],["nz-button","","nzType","primary","nzShape","circle",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-popconfirm","","nzPopconfirmTitle","Voulez-vous vraiment supprimer?","nzPopconfirmPlacement","topRight","nz-button","","nzType","primary","nzShape","circle",3,"nzOnConfirm","nzOnCancel"],["nz-icon","","nzType","delete","nzTheme","outline"],["nz-form","",3,"formGroup"],["nz-row",""],["nz-col","","nzSpan","24"],[3,"nzSpan"],["nzErrorTip","Merci de renseigner ce champs!",3,"nzSpan"],["formControlName","libelle","nz-input","","placeholder","saisir le nom du service",3,"keyup"],["nz-button","","nzType","primary",3,"disabled","click"],["nz-icon","","nzType","check"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","close"]],template:function(e,n){if(1&e&&(b.Tb(0,"ngx-spinner",0),b.Tb(1,"p",1),b.Dc(2," Chargement... "),b.Sb(),b.Sb(),b.Tb(3,"nz-tabset",2),b.ac("nzSelectedIndexChange",function(e){return n.indexOfTab=e}),b.Tb(4,"nz-tab",3),b.Tb(5,"nz-table",4,5),b.Tb(7,"thead"),b.Tb(8,"tr"),b.Bc(9,V,4,5,"th",6),b.Tb(10,"th"),b.Dc(11," Actions "),b.Sb(),b.Sb(),b.Sb(),b.Tb(12,"tbody"),b.Bc(13,I,11,1,"tr",7),b.Sb(),b.Sb(),b.Sb(),b.Tb(14,"nz-dropdown-menu",null,8),b.Tb(16,"div",9),b.Tb(17,"div",10),b.Tb(18,"input",11),b.ac("ngModelChange",function(e){return n.searchValue=e}),b.Sb(),b.Tb(19,"button",12),b.ac("click",function(){return n.search()}),b.Dc(20," Chercher "),b.Sb(),b.Tb(21,"button",13),b.ac("click",function(){return n.reset()}),b.Dc(22,"Annuler"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Bc(23,j,19,5,"nz-tab",14),b.Sb()),2&e){var i=b.pc(6);b.jc("fullScreen",!0),b.zb(3),b.jc("nzSelectedIndex",n.indexOfTab)("nzSize","large"),b.zb(1),b.jc("nzTitle","Liste des services "),b.zb(1),b.jc("nzData",n.listOfDisplayData)("nzPageSize",3)("nzPageIndex",n.pageIndex),b.zb(4),b.jc("ngForOf",n.listOfColumn),b.zb(4),b.jc("ngForOf",i.data),b.zb(5),b.jc("ngModel",n.searchValue),b.zb(5),b.jc("ngIf",n.is_admin)}},directives:[T.a,k.b,k.a,y.c,y.h,y.i,s.m,y.b,y.g,y.e,D.c,O.b,h.d,h.m,h.o,E.a,P.a,C.a,s.n,y.f,y.a,A.a,L.a,L.b,x.a,h.s,h.n,F.b,h.i,N.c,N.a,F.c,F.d,F.a,h.h],styles:[""]}),M),_=l("ekK5"),U=function e(){t(this,e)},B=l("Tm1e"),q=((w=function(){function e(n,i,r){t(this,e),this.http=n,this.Cookie=i,this.router=r,this.url=p.a.backend+"/profil"}return o(e,[{key:"getList",value:function(){return this.http.get(this.url+"/list",this.http_get_request())}},{key:"createProfil",value:function(e){return this.http.post(this.url+"/creer-profil",e,this.http_get_request())}},{key:"updateProfil",value:function(e){return this.http.put(this.url+"/modifier-profil",e,this.http_get_request())}},{key:"deleteProfil",value:function(e){return this.http.delete("".concat(this.url,"/supprimer-profil/").concat(e),this.http_get_request())}},{key:"http_get_request",value:function(){return this.checkCredentials(),{headers:new m.d({"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+this.getAccessToken().accessToken})}}},{key:"checkCredentials",value:function(){this.Cookie.check("access_token")||this.logout()}},{key:"logout",value:function(){this.Cookie.delete("access_token","/"),this.Cookie.delete("user","/"),this.router.navigate(["/login"])}},{key:"getAccessToken",value:function(){return new z.a,JSON.parse(this.Cookie.get("access_token"))}}]),e}()).\u0275fac=function(e){return new(e||w)(b.Xb(m.b),b.Xb(v.a),b.Xb(u.d))},w.\u0275prov=b.Jb({token:w,factory:w.\u0275fac,providedIn:"root"}),w),G=l("zAKX");function $(e,n){if(1&e){var i=b.Ub();b.Tb(0,"nz-filter-trigger",51),b.ac("nzVisibleChange",function(e){return b.rc(i),b.dc(2).visibleNom=e}),b.Ob(1,"i",52),b.Sb()}if(2&e){var t=b.dc(2),r=b.pc(14);b.jc("nzVisible",t.visibleNom)("nzActive",t.searchValueNom.length>0)("nzDropdownMenu",r)}}function H(e,n){if(1&e){var i=b.Ub();b.Tb(0,"nz-filter-trigger",51),b.ac("nzVisibleChange",function(e){return b.rc(i),b.dc(2).visiblePrenom=e}),b.Ob(1,"i",52),b.Sb()}if(2&e){var t=b.dc(2),r=b.pc(23);b.jc("nzVisible",t.visiblePrenom)("nzActive",t.searchValuePrenom.length>0)("nzDropdownMenu",r)}}function K(e,n){if(1&e){var i=b.Ub();b.Tb(0,"nz-filter-trigger",51),b.ac("nzVisibleChange",function(e){return b.rc(i),b.dc(2).visibleService=e}),b.Ob(1,"i",52),b.Sb()}if(2&e){var t=b.dc(2),r=b.pc(59);b.jc("nzVisible",t.visibleService)("nzActive",t.searchValueService.length>0)("nzDropdownMenu",r)}}function X(e,n){if(1&e){var i=b.Ub();b.Tb(0,"nz-filter-trigger",51),b.ac("nzVisibleChange",function(e){return b.rc(i),b.dc(2).visibleEmail=e}),b.Ob(1,"i",52),b.Sb()}if(2&e){var t=b.dc(2),r=b.pc(32);b.jc("nzVisible",t.visibleEmail)("nzActive",t.searchValueEmail.length>0)("nzDropdownMenu",r)}}function J(e,n){if(1&e){var i=b.Ub();b.Tb(0,"nz-filter-trigger",51),b.ac("nzVisibleChange",function(e){return b.rc(i),b.dc(2).visibleSexe=e}),b.Ob(1,"i",52),b.Sb()}if(2&e){var t=b.dc(2),r=b.pc(41);b.jc("nzVisible",t.visibleSexe)("nzActive",t.searchValueSexe.length>0)("nzDropdownMenu",r)}}function W(e,n){if(1&e){var i=b.Ub();b.Tb(0,"nz-filter-trigger",51),b.ac("nzVisibleChange",function(e){return b.rc(i),b.dc(2).visibleProfil=e}),b.Ob(1,"i",52),b.Sb()}if(2&e){var t=b.dc(2),r=b.pc(50);b.jc("nzVisible",t.visibleProfil)("nzActive",t.searchValueProfil.length>0)("nzDropdownMenu",r)}}function Q(e,n){if(1&e&&(b.Tb(0,"th",49),b.Dc(1),b.Bc(2,$,2,3,"nz-filter-trigger",50),b.Bc(3,H,2,3,"nz-filter-trigger",50),b.Bc(4,K,2,3,"nz-filter-trigger",50),b.Bc(5,X,2,3,"nz-filter-trigger",50),b.Bc(6,J,2,3,"nz-filter-trigger",50),b.Bc(7,W,2,3,"nz-filter-trigger",50),b.Sb()),2&e){var i=n.$implicit;b.jc("nzSortFn",i.sortFn),b.zb(1),b.Fc(" ",i.title," "),b.zb(1),b.jc("ngIf","Nom"==i.title),b.zb(1),b.jc("ngIf","Pr\xe9nom"==i.title),b.zb(1),b.jc("ngIf","Service"==i.title),b.zb(1),b.jc("ngIf","Email"==i.title),b.zb(1),b.jc("ngIf","Sexe"==i.title),b.zb(1),b.jc("ngIf","Profil"==i.title)}}function Z(e,n){1&e&&(b.Tb(0,"th"),b.Dc(1," Actions "),b.Sb())}function Y(e,n){if(1&e&&(b.Tb(0,"span"),b.Dc(1),b.Sb()),2&e){var i=n.$implicit;b.zb(1),b.Ec(i.libelle+" ")}}function ee(e,n){if(1&e){var i=b.Ub();b.Tb(0,"td"),b.Tb(1,"nz-space"),b.Tb(2,"nz-space-item"),b.Tb(3,"button",53),b.ac("click",function(){b.rc(i);var e=b.dc().$implicit;return b.dc().updateForm(e)}),b.Ob(4,"i",54),b.Sb(),b.Sb(),b.Tb(5,"nz-space-item"),b.Tb(6,"button",55),b.ac("nzOnConfirm",function(){b.rc(i);var e=b.dc().$implicit;return b.dc().confirmMsgDelete(e)})("nzOnCancel",function(){return b.rc(i),b.dc(2).cancelMsgDelete()}),b.Ob(7,"i",56),b.Sb(),b.Sb(),b.Sb(),b.Sb()}}function ne(e,n){if(1&e&&(b.Tb(0,"tr"),b.Tb(1,"td"),b.Dc(2),b.Sb(),b.Tb(3,"td"),b.Dc(4),b.Sb(),b.Tb(5,"td"),b.Dc(6),b.Sb(),b.Tb(7,"td"),b.Dc(8),b.Sb(),b.Tb(9,"td"),b.Bc(10,Y,2,1,"span",8),b.Sb(),b.Tb(11,"td"),b.Dc(12),b.Sb(),b.Bc(13,ee,8,0,"td",7),b.Sb()),2&e){var i=n.$implicit,t=b.dc();b.zb(2),b.Ec(null==i?null:i.nom),b.zb(2),b.Ec(null==i?null:i.prenom),b.zb(2),b.Ec(null==i?null:i.email),b.zb(2),b.Ec(null==i?null:i.sexe),b.zb(2),b.jc("ngForOf",null==i?null:i.roles),b.zb(2),b.Ec(null==i||null==i.serviceB?null:i.serviceB.libelle),b.zb(1),b.jc("ngIf",t.is_admin)}}function ie(e,n){if(1&e&&b.Ob(0,"nz-option",36),2&e){var i=n.$implicit;b.jc("nzLabel",i.libelle)("nzValue",i)}}function te(e,n){if(1&e&&b.Ob(0,"nz-option",36),2&e){var i=n.$implicit;b.jc("nzLabel",i.libelle)("nzValue",i)}}var re,oe,le,ce=[{path:"",component:f,children:[{path:"service",component:R},{path:"user",component:(re=function(){function i(e,n,r,o,l,c){t(this,i),this.behaviorService=e,this.fb=n,this.personneService=r,this.profilService=o,this.serviceBService=l,this.tokenService=c,this.environment=p.a,this.perso=new _.a,this.listOfColumn=[],this.searchValueNom="",this.searchValuePrenom="",this.searchValueEmail="",this.searchValueSexe="",this.searchValueProfil="",this.searchValueService="",this.visibleNom=!1,this.visiblePrenom=!1,this.visibleEmail=!1,this.visibleSexe=!1,this.visibleProfil=!1,this.visibleService=!1,this.token=this.tokenService.getAccessToken()}return o(i,[{key:"ngOnInit",value:function(){this.behaviorService.setBreadcrumbItems(["Accueil","Gestion Utilisateur","User"]),this.makePersonneForm(null),this.list(),this.listOfColumnHeadeer(),this.listProfil(),this.listService(),this.adminIsConnect=this.isAdmin(),this.is_admin=this.isAdmin()}},{key:"isAdmin",value:function(){return this.token.roles.indexOf(p.a.ROLE_ADMIN)>-1}},{key:"listProfil",value:function(){var e=this;this.profilService.getList().subscribe(function(i){if(e.profilList=i,console.log("Profil List ==>",e.profilList),0==e.adminIsConnect){var t,r=function(e,i){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=n(e))||i&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,a=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return c=e.done,e},e:function(e){a=!0,l=e},f:function(){try{c||null==t.return||t.return()}finally{if(a)throw l}}}}(e.profilList);try{for(r.s();!(t=r.n()).done;){var o=t.value;"ROLE_PERSONNE"==o.name&&(e.rolePersonne=new U,e.rolePersonne=o,e.rolePersonne.libelle="PERSONNE",e.perso.roles=[],e.perso.roles.push(e.rolePersonne),e.makePersonneForm(e.perso))}}catch(l){r.e(l)}finally{r.f()}}console.log(e.rolePersonne),e.profilList.forEach(function(e){switch(e.name){case p.a.ROLE_ADMIN:e.libelle="ADMINISTRATEUR";break;case p.a.ROLE_DEMANDEUR:e.libelle="DEMANDEUR";break;case p.a.ROLE_GESTIONNAIRE:e.libelle="GESTIONNAIRE";break;case p.a.ROLE_PERSONNE:e.libelle="PERSONNE";break;case p.a.ROLE_VALIDATEUR:e.libelle="VALIDATEUR";break;case p.a.ROLE_AUDITEUR:e.libelle="AUDITEUR"}})},function(e){console.log("error getList Profil ==>",e.message," ",e.status," ",e.statusText)})}},{key:"listService",value:function(){var e=this;this.serviceBService.getList().subscribe(function(n){e.serviceBList=n,console.log("Service List ==>",e.serviceBList)},function(e){console.log("error getList Service ==>",e.message," ",e.status," ",e.statusText)})}},{key:"makePersonneForm",value:function(e){this.validatePersonneForm=this.fb.group({id:[null!=e?e.id:null],nom:[null!=e?e.nom:null,[h.r.required]],prenom:[null!=e?e.prenom:null,[h.r.required]],sexe:[null!=e?e.sexe:null,[h.r.required]],email:[null!=e?e.email:null,[h.r.required]],roles:[null!=e?e.roles:null,[h.r.required]],serviceB:[null!=e?e.serviceB:null,[h.r.required]],username:[null!=e?e.username:null],password:[""],confirm_password:[""]},{validator:this.ConfirmedValidator("password","confirm_password")})}},{key:"ConfirmedValidator",value:function(e,n){return function(i){var t=i.controls[n];t.errors&&!t.errors.confirmedValidator||t.setErrors(i.controls[e].value!==t.value?{confirmedValidator:!0}:null)}}},{key:"resetPersonneForm",value:function(e){for(var n in e.preventDefault(),this.validatePersonneForm.reset(),this.validatePersonneForm.controls)this.validatePersonneForm.controls[n].markAsPristine(),this.validatePersonneForm.controls[n].updateValueAndValidity();this.makePersonneForm(null),this.indexOfTab=0,this.pageIndex=1}},{key:"submitPersonneForm",value:function(){var n=this;for(var i in this.validatePersonneForm.controls)this.validatePersonneForm.controls[i].markAsDirty(),this.validatePersonneForm.controls[i].updateValueAndValidity();if(this.validatePersonneForm.valid){var t=this.validatePersonneForm.value;if(null==t.id)this.personneService.createPersonne(t).subscribe(function(i){i.roles.forEach(function(e){switch(e.name){case p.a.ROLE_ADMIN:e.libelle="ADMINISTRATEUR";break;case p.a.ROLE_DEMANDEUR:e.libelle="DEMANDEUR";break;case p.a.ROLE_GESTIONNAIRE:e.libelle="GESTIONNAIRE";break;case p.a.ROLE_PERSONNE:e.libelle="PERSONNE";break;case p.a.ROLE_VALIDATEUR:e.libelle="VALIDATEUR";break;case p.a.ROLE_AUDITEUR:e.libelle="AUDITEUR"}}),n.personneList.unshift(i),n.personneList=e(n.personneList),n.listOfDisplayData=e(n.personneList),n.makePersonneForm(null),console.log("Enregistrement ok"),n.indexOfTab=0,n.pageIndex=1},function(e){console.log("Enregistrement non ok")});else{var r=this.personneList.findIndex(function(e){return e.id==t.id});this.personneService.updatePersonne(t).subscribe(function(i){console.log(n.personneList),console.log(i),n.personneList[r]=i,n.personneList=e(n.personneList),n.listOfDisplayData=e(n.personneList),console.log(n.personneList),n.makePersonneForm(null),console.log("Update ok"),n.indexOfTab=0,n.pageIndex=1},function(e){console.log("Update non ok")})}}}},{key:"list",value:function(){var n=this;this.personneService.getList().subscribe(function(i){n.personneList=i,n.personneList.forEach(function(e){e.roles.forEach(function(e){switch(e.name){case p.a.ROLE_ADMIN:e.libelle="ADMINISTRATEUR";break;case p.a.ROLE_DEMANDEUR:e.libelle="DEMANDEUR";break;case p.a.ROLE_GESTIONNAIRE:e.libelle="GESTIONNAIRE";break;case p.a.ROLE_PERSONNE:e.libelle="PERSONNE";break;case p.a.ROLE_VALIDATEUR:e.libelle="VALIDATEUR";break;case p.a.ROLE_AUDITEUR:e.libelle="AUDITEUR"}})}),console.log("Personne List ==>",n.personneList),n.listOfDisplayData=e(n.personneList),n.pageIndex=1},function(e){console.log("error getList personne ==>",e.message," ",e.status," ",e.statusText)})}},{key:"resetNom",value:function(){this.searchValueNom="",this.searchNom()}},{key:"searchNom",value:function(){var e=this;this.visibleNom=!1,this.listOfDisplayData=this.personneList.filter(function(n){return-1!==n.nom.indexOf(e.searchValueNom)})}},{key:"resetPrenom",value:function(){this.searchValuePrenom="",this.searchPrenom()}},{key:"searchPrenom",value:function(){var e=this;this.visiblePrenom=!1,this.listOfDisplayData=this.personneList.filter(function(n){return-1!==n.prenom.indexOf(e.searchValuePrenom)})}},{key:"resetEmail",value:function(){this.searchValueEmail="",this.searchEmail()}},{key:"searchEmail",value:function(){var e=this;this.visibleEmail=!1,this.listOfDisplayData=this.personneList.filter(function(n){return-1!==n.email.indexOf(e.searchValueEmail)})}},{key:"resetSexe",value:function(){this.searchValueNom="",this.searchSexe()}},{key:"searchSexe",value:function(){var e=this;this.visibleSexe=!1,this.listOfDisplayData=this.personneList.filter(function(n){return-1!==n.sexe.indexOf(e.searchValueSexe)})}},{key:"resetProfil",value:function(){this.searchValueProfil="",this.searchProfil()}},{key:"searchProfil",value:function(){var e=this;this.visibleProfil=!1,this.listOfDisplayData=this.personneList.filter(function(n){return-1!==n.profil.libelle.indexOf(e.searchValueProfil)})}},{key:"resetService",value:function(){this.searchValueService="",this.searchProfil()}},{key:"searchService",value:function(){var e=this;this.visibleService=!1,this.listOfDisplayData=this.personneList.filter(function(n){return-1!==n.serviceB.libelle.indexOf(e.searchValueService)})}},{key:"updateForm",value:function(e){this.makePersonneForm(e),this.indexOfTab=1}},{key:"confirmMsgDelete",value:function(e){var n=this;this.personneService.deletePersonne(e.id).subscribe(function(e){console.log("data du delete ==>",e),n.list()},function(e){console.log("error delete Personne ==>",e.message," ",e.status," ",e.statusText)})}},{key:"cancelMsgDelete",value:function(){}},{key:"listOfColumnHeadeer",value:function(){this.listOfColumn=[{title:"Nom",compare:null,sortFn:function(e,n){return e.nom.localeCompare(n.nom)}},{title:"Pr\xe9nom",compare:null,sortFn:function(e,n){return e.prenom.localeCompare(n.prenom)}},{title:"Email",compare:null,sortFn:function(e,n){return e.email.localeCompare(n.email)}},{title:"Sexe",compare:null,sortFn:function(e,n){return e.sexe.localeCompare(n.sexe)}},{title:"Profil",compare:null,sortFn:function(e,n){return e.profil.libelle.localeCompare(n.profil.libelle)}},{title:"Service",compare:null,sortFn:function(e,n){return e.serviceB.libelle.localeCompare(n.serviceB.libelle)}}]}}]),i}(),re.\u0275fac=function(e){return new(e||re)(b.Nb(d.a),b.Nb(h.f),b.Nb(B.a),b.Nb(q),b.Nb(S),b.Nb(g.a))},re.\u0275cmp=b.Hb({type:re,selectors:[["app-user-run"]],decls:136,vars:45,consts:[["bdColor","rgba(0, 0, 0, 0.8)","size","large","color","#fff","type","line-scale-pulse-out",3,"fullScreen"],[2,"color","white"],[3,"nzSelectedIndex","nzSize","nzSelectedIndexChange"],[3,"nzTitle"],["nzTableLayout","fixed",3,"nzData","nzPageSize","nzPageIndex"],["sortTable",""],["nzCustomFilter","",3,"nzSortFn",4,"ngFor","ngForOf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["menuNom","nzDropdownMenu"],[1,"ant-table-filter-dropdown"],[1,"search-box"],["type","text","nz-input","","placeholder","chercher un nom",3,"ngModel","ngModelChange"],["nz-button","","nzSize","small","nzType","primary",1,"search-button",3,"click"],["nz-button","","nzSize","small",3,"click"],["menuPrenom","nzDropdownMenu"],["type","text","nz-input","","placeholder","chercher un prenom",3,"ngModel","ngModelChange"],["menuEmail","nzDropdownMenu"],["type","text","nz-input","","placeholder","chercher un email",3,"ngModel","ngModelChange"],["menuSexe","nzDropdownMenu"],["type","text","nz-input","","placeholder","chercher un sexe",3,"ngModel","ngModelChange"],["menuProfil","nzDropdownMenu"],["type","text","nz-input","","placeholder","chercher un profil",3,"ngModel","ngModelChange"],["menuService","nzDropdownMenu"],["type","text","nz-input","","placeholder","chercher un service",3,"ngModel","ngModelChange"],["nz-form","",3,"formGroup"],["nz-row",""],["nz-col","","nzSpan","12",2,"padding-right","1.5em"],[3,"nzSpan"],["nzErrorTip","Merci de renseigner ce champs!",3,"nzSpan"],["formControlName","nom","nz-input","","placeholder","saisir le nom"],["formControlName","prenom","nz-input","","placeholder","saisir le pr\xe9nom"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Selectionner un service","formControlName","serviceB"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["formControlName","roles","nzMode","multiple","nzPlaceHolder","S\xe9lectionner un groupe de profil",3,"nzSize","nzDisabled"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Selectionner un sexe","formControlName","sexe"],[3,"nzLabel","nzValue"],["nzErrorTip","Merci de renseigner un email valide!",3,"nzSpan"],["formControlName","email","nz-input","","placeholder","saisir le mail",3,"email"],["nz-col","","nzSpan","8",2,"padding-right","1.5em"],["formControlName","username","nz-input","","placeholder","saisir le login"],["nz-input","","formControlName","password","placeholder","saisir le mot de passe","type","password"],["nzErrorTip","Le mot de passe et la confirmation ne correspondent pas",3,"nzSpan"],["nz-input","","formControlName","confirm_password","placeholder","re-saisir le mot de passe","type","password"],["nz-col","","nzSpan","24"],["nz-button","","nzType","primary",3,"disabled","click"],["nz-icon","","nzType","check"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","close"],["nzCustomFilter","",3,"nzSortFn"],[3,"nzVisible","nzActive","nzDropdownMenu","nzVisibleChange",4,"ngIf"],[3,"nzVisible","nzActive","nzDropdownMenu","nzVisibleChange"],["nz-icon","","nzType","search"],["nz-button","","nzType","primary","nzShape","circle",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-popconfirm","","nzPopconfirmTitle","Voulez-vous vraiment supprimer?","nzPopconfirmPlacement","topRight","nz-button","","nzType","primary","nzShape","circle",3,"nzOnConfirm","nzOnCancel"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(e,n){if(1&e&&(b.Tb(0,"ngx-spinner",0),b.Tb(1,"p",1),b.Dc(2," Chargement... "),b.Sb(),b.Sb(),b.Tb(3,"nz-tabset",2),b.ac("nzSelectedIndexChange",function(e){return n.indexOfTab=e}),b.Tb(4,"nz-tab",3),b.Tb(5,"nz-table",4,5),b.Tb(7,"thead"),b.Tb(8,"tr"),b.Bc(9,Q,8,8,"th",6),b.Bc(10,Z,2,0,"th",7),b.Sb(),b.Sb(),b.Tb(11,"tbody"),b.Bc(12,ne,14,7,"tr",8),b.Sb(),b.Sb(),b.Sb(),b.Tb(13,"nz-dropdown-menu",null,9),b.Tb(15,"div",10),b.Tb(16,"div",11),b.Tb(17,"input",12),b.ac("ngModelChange",function(e){return n.searchValueNom=e}),b.Sb(),b.Tb(18,"button",13),b.ac("click",function(){return n.searchNom()}),b.Dc(19," Chercher "),b.Sb(),b.Tb(20,"button",14),b.ac("click",function(){return n.resetNom()}),b.Dc(21,"Annuler"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(22,"nz-dropdown-menu",null,15),b.Tb(24,"div",10),b.Tb(25,"div",11),b.Tb(26,"input",16),b.ac("ngModelChange",function(e){return n.searchValuePrenom=e}),b.Sb(),b.Tb(27,"button",13),b.ac("click",function(){return n.searchPrenom()}),b.Dc(28," Chercher "),b.Sb(),b.Tb(29,"button",14),b.ac("click",function(){return n.resetPrenom()}),b.Dc(30,"Annuler"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(31,"nz-dropdown-menu",null,17),b.Tb(33,"div",10),b.Tb(34,"div",11),b.Tb(35,"input",18),b.ac("ngModelChange",function(e){return n.searchValueEmail=e}),b.Sb(),b.Tb(36,"button",13),b.ac("click",function(){return n.searchEmail()}),b.Dc(37," Chercher "),b.Sb(),b.Tb(38,"button",14),b.ac("click",function(){return n.resetEmail()}),b.Dc(39,"Annuler"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(40,"nz-dropdown-menu",null,19),b.Tb(42,"div",10),b.Tb(43,"div",11),b.Tb(44,"input",20),b.ac("ngModelChange",function(e){return n.searchValueSexe=e}),b.Sb(),b.Tb(45,"button",13),b.ac("click",function(){return n.searchSexe()}),b.Dc(46," Chercher "),b.Sb(),b.Tb(47,"button",14),b.ac("click",function(){return n.resetSexe()}),b.Dc(48,"Annuler"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(49,"nz-dropdown-menu",null,21),b.Tb(51,"div",10),b.Tb(52,"div",11),b.Tb(53,"input",22),b.ac("ngModelChange",function(e){return n.searchValueProfil=e}),b.Sb(),b.Tb(54,"button",13),b.ac("click",function(){return n.searchProfil()}),b.Dc(55," Chercher "),b.Sb(),b.Tb(56,"button",14),b.ac("click",function(){return n.resetProfil()}),b.Dc(57,"Annuler"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(58,"nz-dropdown-menu",null,23),b.Tb(60,"div",10),b.Tb(61,"div",11),b.Tb(62,"input",24),b.ac("ngModelChange",function(e){return n.searchValueService=e}),b.Sb(),b.Tb(63,"button",13),b.ac("click",function(){return n.searchService()}),b.Dc(64," Chercher "),b.Sb(),b.Tb(65,"button",14),b.ac("click",function(){return n.resetService()}),b.Dc(66,"Annuler"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(67,"nz-tab",3),b.Tb(68,"form",25),b.Tb(69,"div",26),b.Tb(70,"div",27),b.Tb(71,"nz-form-item"),b.Tb(72,"nz-form-label",28),b.Dc(73,"Nom"),b.Sb(),b.Tb(74,"nz-form-control",29),b.Ob(75,"input",30),b.Sb(),b.Sb(),b.Sb(),b.Tb(76,"div",27),b.Tb(77,"nz-form-item"),b.Tb(78,"nz-form-label",28),b.Dc(79,"Pr\xe9nom"),b.Sb(),b.Tb(80,"nz-form-control",29),b.Ob(81,"input",31),b.Sb(),b.Sb(),b.Sb(),b.Tb(82,"div",27),b.Tb(83,"nz-form-item"),b.Tb(84,"nz-form-label",28),b.Dc(85,"Service"),b.Sb(),b.Tb(86,"nz-select",32),b.Bc(87,ie,1,2,"nz-option",33),b.Sb(),b.Sb(),b.Sb(),b.Tb(88,"div",27),b.Tb(89,"nz-form-item"),b.Tb(90,"nz-form-label",28),b.Dc(91,"Profil"),b.Sb(),b.Tb(92,"nz-select",34),b.Bc(93,te,1,2,"nz-option",33),b.Sb(),b.Sb(),b.Sb(),b.Tb(94,"div",27),b.Tb(95,"nz-form-item"),b.Tb(96,"nz-form-label",28),b.Dc(97,"Sexe"),b.Sb(),b.Tb(98,"nz-select",35),b.Ob(99,"nz-option",36),b.Ob(100,"nz-option",36),b.Ob(101,"nz-option",36),b.Sb(),b.Sb(),b.Sb(),b.Tb(102,"div",27),b.Tb(103,"nz-form-item"),b.Tb(104,"nz-form-label",28),b.Dc(105,"E-mail"),b.Sb(),b.Tb(106,"nz-form-control",37),b.Ob(107,"input",38),b.Sb(),b.Sb(),b.Sb(),b.Tb(108,"div",39),b.Tb(109,"nz-form-item"),b.Tb(110,"nz-form-label",28),b.Dc(111,"Login"),b.Sb(),b.Tb(112,"nz-form-control",29),b.Ob(113,"input",40),b.Sb(),b.Sb(),b.Sb(),b.Tb(114,"div",39),b.Tb(115,"nz-form-item"),b.Tb(116,"nz-form-label",28),b.Dc(117,"Mot de passe "),b.Sb(),b.Tb(118,"nz-form-control",29),b.Ob(119,"input",41),b.Sb(),b.Sb(),b.Sb(),b.Tb(120,"div",39),b.Tb(121,"nz-form-item"),b.Tb(122,"nz-form-label",28),b.Dc(123,"Confirmer le Mot de passe "),b.Sb(),b.Tb(124,"nz-form-control",42),b.Ob(125,"input",43),b.Sb(),b.Sb(),b.Sb(),b.Tb(126,"div",44),b.Tb(127,"nz-space"),b.Tb(128,"nz-space-item"),b.Tb(129,"button",45),b.ac("click",function(){return n.submitPersonneForm()}),b.Ob(130,"i",46),b.Dc(131," Enregistrer "),b.Sb(),b.Sb(),b.Tb(132,"nz-space-item"),b.Tb(133,"button",47),b.ac("click",function(e){return n.resetPersonneForm(e)}),b.Ob(134,"i",48),b.Dc(135," Annuler "),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()),2&e){var i=b.pc(6);b.jc("fullScreen",!0),b.zb(3),b.jc("nzSelectedIndex",n.indexOfTab)("nzSize","large"),b.zb(1),b.jc("nzTitle","Liste des personnes"),b.zb(1),b.jc("nzData",n.listOfDisplayData)("nzPageSize",5)("nzPageIndex",n.pageIndex),b.zb(4),b.jc("ngForOf",n.listOfColumn),b.zb(1),b.jc("ngIf",n.is_admin),b.zb(2),b.jc("ngForOf",i.data),b.zb(5),b.jc("ngModel",n.searchValueNom),b.zb(9),b.jc("ngModel",n.searchValuePrenom),b.zb(9),b.jc("ngModel",n.searchValueEmail),b.zb(9),b.jc("ngModel",n.searchValueSexe),b.zb(9),b.jc("ngModel",n.searchValueProfil),b.zb(9),b.jc("ngModel",n.searchValueService),b.zb(5),b.jc("nzTitle","Nouvelle personne"),b.zb(1),b.jc("formGroup",n.validatePersonneForm),b.zb(4),b.jc("nzSpan",24),b.zb(2),b.jc("nzSpan",24),b.zb(4),b.jc("nzSpan",24),b.zb(2),b.jc("nzSpan",24),b.zb(4),b.jc("nzSpan",24),b.zb(3),b.jc("ngForOf",n.serviceBList),b.zb(3),b.jc("nzSpan",24),b.zb(2),b.jc("nzSize","default")("nzDisabled",!n.adminIsConnect),b.zb(1),b.jc("ngForOf",n.profilList),b.zb(3),b.jc("nzSpan",24),b.zb(3),b.jc("nzLabel","Masculin")("nzValue","Masculin"),b.zb(1),b.jc("nzLabel","F\xe9minin")("nzValue","F\xe9minin"),b.zb(1),b.jc("nzLabel","Non pr\xe9cis\xe9")("nzValue","Non pr\xe9cis\xe9"),b.zb(3),b.jc("nzSpan",24),b.zb(2),b.jc("nzSpan",24),b.zb(1),b.jc("email",!0),b.zb(3),b.jc("nzSpan",24),b.zb(2),b.jc("nzSpan",24),b.zb(4),b.jc("nzSpan",24),b.zb(2),b.jc("nzSpan",24),b.zb(4),b.jc("nzSpan",24),b.zb(2),b.jc("nzSpan",24),b.zb(5),b.jc("disabled",n.validatePersonneForm.invalid)}},directives:[T.a,k.b,k.a,y.c,y.h,y.i,s.m,s.n,y.e,D.c,O.b,h.d,h.m,h.o,E.a,P.a,C.a,h.s,h.n,F.b,h.i,N.c,N.a,F.c,F.d,F.a,h.h,G.b,G.a,h.e,L.a,L.b,A.a,y.b,y.g,y.f,y.a,x.a],styles:[""]}),re)}]}],ae=((oe=function e(){t(this,e)}).\u0275mod=b.Lb({type:oe}),oe.\u0275inj=b.Kb({factory:function(e){return new(e||oe)},imports:[[u.g.forChild(ce)],u.g]}),oe),se=l("yW9e"),ue=l("yNE/"),be=l("Q8cG"),fe=l("bE2y"),he=l("SKKP"),pe=l("0jEk"),de=l("3/1E"),me=l("dEAy"),ze=l("5vDB"),ve=((le=function e(){t(this,e)}).\u0275mod=b.Lb({type:le}),le.\u0275inj=b.Kb({factory:function(e){return new(e||le)},imports:[[T.b,s.c,ae,se.e,A.b,ue.c,be.e,u.g,pe.a,E.c,h.p,L.c,F.e,fe.b,N.b,O.c,k.c,y.d,G.c,he.b,x.b,h.j,de.b,D.b,me.d,ze.b]]}),le)}}])}();